<!DOCTYPE html>
<html class="w-mod-js w-mod-ix wf-dmsans-n5-active wf-dmsans-n7-active wf-dmsans-n4-active wf-active" data-wf-domain="darktemplate.webflow.io" data-wf-locale="en" data-wf-page="61113c4e9f23df42e2554109" data-wf-site="61113c4e9f23df1e7f554117" data-wf-status="1" lang="en">
<head>
  <style>.wf-force-outline-none[tabindex="-1"]:focus{outline:none;}</style>
  <meta charset="utf-8"/>
  <title>Policy Proposal | PolityxMap</title>
  <meta content="View detailed healthcare policy proposal information with PolityxMap. Explore background, implementation details, and expected impact." name="description"/>
  <meta content="Policy Proposal | PolityxMap" property="og:title"/>
  <meta content="View detailed healthcare policy proposal information with PolityxMap. Explore background, implementation details, and expected impact." property="og:description"/>
  <meta content="https://cdn.prod.website-files.com/61113c4e9f23df1e7f554117/6116f87a2ba0ad7e5947b25e_featured-image-dark-template.png" property="og:image"/>
  <meta content="Policy Proposal | PolityxMap" property="twitter:title"/>
  <meta content="View detailed healthcare policy proposal information with PolityxMap. Explore background, implementation details, and expected impact." property="twitter:description"/>
  <meta content="https://cdn.prod.website-files.com/61113c4e9f23df1e7f554117/6116f87a2ba0ad7e5947b25e_featured-image-dark-template.png" property="twitter:image"/>
  <meta content="website" property="og:type"/>
  <meta content="width=device-width, initial-scale=1" name="viewport"/>
  <meta content="Webflow" name="generator"/>
  <link href="https://cdn.prod.website-files.com/61113c4e9f23df1e7f554117/css/darktemplate.webflow.eb6e6d95d.css" rel="stylesheet" type="text/css"/>
  <link href="https://fonts.googleapis.com" rel="preconnect"/>
  <link crossorigin="anonymous" href="https://fonts.gstatic.com" rel="preconnect"/>
  <script src="https://ajax.googleapis.com/ajax/libs/webfont/1.6.26/webfont.js" type="text/javascript"></script>
  <link href="https://fonts.googleapis.com/css?family=DM+Sans:regular,500,700" media="all" rel="stylesheet"/>
  <script type="text/javascript">WebFont.load({  google: {    families: ["DM Sans:regular,500,700"]  }});</script>
  <script type="text/javascript">!function(o,c){var n=c.documentElement,t=" w-mod-";n.className+=t+"js","ontouchstart"in o||o.DocumentTouch&&c instanceof DocumentTouch&&(n.className+=t+"touch")}(window,document);</script>
    <!-- Favicon implementation -->
  <link rel="icon" type="image/svg+xml" href="img/PolityxFavicon.svg">
  <link rel="icon" type="image/png" href="img/PolityxFavicon.png">
  <link rel="apple-touch-icon" href="img/PolityxFavicon.png">
  <link rel="shortcut icon" type="image/x-icon" href="img/PolityxFavicon.png">
  <!-- Leaflet CSS -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <!-- Leaflet JS -->
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <!-- Includes script for header and footer -->
  <script src="/includes.js"></script>
  <!-- Unified Proposals System -->
  <script src="/proposals.js"></script>
  <script src="/data-migration.js"></script>
  <script src="/proposal-generator.js"></script>
  <!-- Proposal Template JS -->
  <script src="/proposal-template.js"></script>
  <!-- Font Awesome for icons -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
  <style>
  .w-webflow-badge{
    display:none !important;
  }
  
  .bg-gradient-blur-wrapper {
    position: absolute;
    width: 700px;
    height: 700px;
    z-index: 0;
    opacity: 0.3;
  }
  
  .proposal-heading {
    font-size: 56px;
    line-height: 1.1;
    font-weight: 700;
    color: #fff;
    margin-bottom: 20px;
    text-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
  }
  
  .proposal-accent {
    color: #8A67FF;
  }
  
  .proposal-description {
    font-size: 18px;
    line-height: 1.6;
    color: rgba(255, 255, 255, 0.9);
    margin-bottom: 30px;
    max-width: 800px;
  }
  
  .proposal-content-container {
    background-color: rgba(28, 26, 36, 0.8);
    border-radius: 15px;
    padding: 40px;
    margin-bottom: 40px;
    backdrop-filter: blur(10px);
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
  }
  
  .proposal-section {
    margin-bottom: 30px;
  }
  
  .proposal-section-title {
    font-size: 24px;
    font-weight: 600;
    color: #fff;
    margin-bottom: 15px;
    display: flex;
    align-items: center;
  }
  
  .proposal-section-title i {
    margin-right: 10px;
    color: #8A67FF;
  }
  
  .proposal-section-content {
    font-size: 16px;
    line-height: 1.6;
    color: rgba(255, 255, 255, 0.9);
  }
  
  .proposal-meta {
    display: flex;
    flex-wrap: wrap;
    gap: 20px;
    margin-bottom: 30px;
  }
  
  .proposal-meta-item {
    background-color: rgba(40, 38, 50, 0.6);
    padding: 15px;
    border-radius: 8px;
    flex: 1 1 200px;
  }
  
  .proposal-meta-label {
    font-size: 14px;
    color: rgba(255, 255, 255, 0.6);
    margin-bottom: 5px;
  }
  
  .proposal-meta-value {
    font-size: 16px;
    font-weight: 500;
    color: #fff;
  }
  
  .proposal-map {
    height: 300px;
    border-radius: 10px;
    margin-bottom: 30px;
    overflow: hidden;
  }
  
  .proposal-tag {
    display: inline-block;
    background-color: rgba(138, 103, 255, 0.2);
    color: #8A67FF;
    padding: 6px 12px;
    border-radius: 20px;
    margin-right: 10px;
    margin-bottom: 10px;
    font-size: 14px;
    transition: all 0.3s ease;
  }
  
  .proposal-tag:hover {
    background-color: rgba(138, 103, 255, 0.4);
    transform: translateY(-2px);
  }
  
  .proposal-actions {
    display: flex;
    gap: 15px;
    margin-top: 40px;
  }
  
  @media screen and (max-width: 767px) {
    .proposal-heading {
      font-size: 40px;
    }
    
    .proposal-content-container {
      padding: 25px;
    }
  }
  </style>
</head>
<body class="bg-neutral-800">
<div class="page-wrapper" style="opacity: 1;">
  <!-- Header placeholder - will be filled by includes.js -->
  <div id="site-header"></div>

  <section class="section-hero wf-section">
    <div class="container-default w-container">
      <div class="bg-gradient-blur-wrapper" style="top: 0; left: 0; transform: translate3d(0px, 0px, 0px) scale3d(1, 1, 1) rotateX(0deg) rotateY(0deg) rotateZ(0deg) skew(0deg, 0deg); transform-style: preserve-3d;">
        <div class="bg-gradient-blur-circle-1"></div>
        <div class="bg-gradient-blur-circle-2"></div>
      </div>
      
      <div class="home-hero-featured-message-wrapper" data-w-id="448f5ead-3667-0bad-b1a4-a6038870800b" style="transform: translate3d(0px, 0%, 0px) scale3d(1, 1, 1) rotateX(0deg) rotateY(0deg) rotateZ(0deg) skew(0deg, 0deg); opacity: 1; transform-style: preserve-3d;">
        <div class="home-hero-featured-message-content">
          <a class="home-hero-featured-message-link w-inline-block" data-w-id="5747d66c-b4ac-690f-6026-662ab3648be2" href="/proposals.html">
            <div class="home-hero-featured-message-tag">Policy</div>
            <div class="home-hero-featured-message-text">View All Proposals</div>
            <div class="home-hero-featured-message-icon"></div>
          </a>
          <div class="home-hero-featured-message-blur"></div>
        </div>
      </div>
      <h1 class="proposal-heading" id="proposal-title" data-w-id="abc7287a-ad94-a3ec-8716-36750d55fc4e" style="transform: translate3d(0px, 0%, 0px) scale3d(1, 1, 1) rotateX(0deg) rotateY(0deg) rotateZ(0deg) skew(0deg, 0deg); opacity: 1; transform-style: preserve-3d;">Loading proposal...</h1>
      <p class="proposal-description" id="proposal-description" data-w-id="749e645b-3b65-110f-471d-f6af6dfbc601" style="transform: translate3d(0px, 0px, 0px) scale3d(1, 1, 1) rotateX(0deg) rotateY(0deg) rotateZ(0deg) skew(0deg, 0deg); opacity: 1; transform-style: preserve-3d;">Loading proposal details...</p>
    </div>
    
    <div class="container-default w-container">
      <div class="proposal-content-container">
        <!-- Proposal Meta Information -->
        <div class="proposal-meta">
          <div class="proposal-meta-item">
            <div class="proposal-meta-label">Location</div>
            <div class="proposal-meta-value" id="proposal-location">Loading...</div>
          </div>
          <div class="proposal-meta-item">
            <div class="proposal-meta-label">Author</div>
            <div class="proposal-meta-value" id="proposal-author">Loading...</div>
          </div>
          <div class="proposal-meta-item">
            <div class="proposal-meta-label">Institution</div>
            <div class="proposal-meta-value" id="proposal-institution">Loading...</div>
          </div>
        </div>
        
        <!-- Proposal Map -->
        <div id="proposal-map" class="proposal-map">
          <!-- Map will be populated by JavaScript -->
        </div>
        
        <!-- Proposal Background -->
        <div class="proposal-section">
          <h2 class="proposal-section-title"><i class="fas fa-info-circle"></i> Background</h2>
          <div class="proposal-section-content" id="proposal-background">Loading...</div>
        </div>
        
        <!-- Proposal Policy -->
        <div class="proposal-section">
          <h2 class="proposal-section-title"><i class="fas fa-file-alt"></i> Policy Proposal</h2>
          <div class="proposal-section-content" id="proposal-policy">Loading...</div>
        </div>
        
        <!-- Proposal Stakeholders -->
        <div class="proposal-section">
          <h2 class="proposal-section-title"><i class="fas fa-users"></i> Key Stakeholders</h2>
          <div class="proposal-section-content" id="proposal-stakeholders">Loading...</div>
        </div>
        
        <!-- Proposal Costs -->
        <div class="proposal-section">
          <h2 class="proposal-section-title"><i class="fas fa-dollar-sign"></i> Costs & Funding</h2>
          <div class="proposal-section-content" id="proposal-costs">Loading...</div>
        </div>
        
        <!-- Proposal Metrics -->
        <div class="proposal-section">
          <h2 class="proposal-section-title"><i class="fas fa-chart-line"></i> Success Metrics</h2>
          <div class="proposal-section-content" id="proposal-metrics">Loading...</div>
        </div>
        
        <!-- Proposal Timeline -->
        <div class="proposal-section">
          <h2 class="proposal-section-title"><i class="fas fa-calendar-alt"></i> Implementation Timeline</h2>
          <div class="proposal-section-content" id="proposal-timeline">Loading...</div>
        </div>
        
        <!-- Proposal Tags -->
        <div class="proposal-section">
          <h2 class="proposal-section-title"><i class="fas fa-tags"></i> Tags</h2>
          <div id="proposal-tags"></div>
        </div>
        
        <!-- Proposal Actions -->
        <div class="proposal-actions">
          <a href="/proposals.html" class="button-secondary w-button">Back to All Proposals</a>
          <a href="#" class="button-primary w-button" onclick="window.history.back(); return false;">Return to Previous Page</a>
        </div>
      </div>
    </div>
  </section>

  <!-- Footer placeholder - will be filled by includes.js -->
  <div id="site-footer"></div>
</div>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    // Get the slug from the URL path or query parameter
    let slug;
    
    // First check if it's in the query parameter
    const urlParams = new URLSearchParams(window.location.search);
    slug = urlParams.get('city');
    
    // If not in query parameter, try to get from URL path
    if (!slug) {
      const pathSegments = window.location.pathname.split('/');
      slug = pathSegments[pathSegments.length - 1].replace('.html', '');
    }
    
    // Find the proposal by slug
    const proposal = window.ProposalsCMS.findProposalBySlug(slug);
    
    if (proposal) {
      // Update page title with format "[Healthcare issue] in [City], [Country spelled out]"
      const title = `${proposal.healthcareIssue || proposal.issue} in ${proposal.city}, United States`;
      document.title = title;
      
      // Update meta description
      const metaDescription = document.querySelector('meta[name="description"]');
      if (metaDescription) {
        metaDescription.setAttribute('content', proposal.description);
      }
      
      // Update OG and Twitter title
      document.querySelector('meta[property="og:title"]').setAttribute('content', title);
      document.querySelector('meta[property="twitter:title"]').setAttribute('content', title);
      
      // Populate proposal data
      document.getElementById('proposal-title').textContent = title;
      document.getElementById('proposal-location').textContent = `${proposal.city}, ${proposal.state}`;
      document.getElementById('proposal-description').textContent = proposal.description;
      document.getElementById('proposal-background').textContent = proposal.background;
      document.getElementById('proposal-policy').textContent = proposal.policy;
      document.getElementById('proposal-stakeholders').textContent = proposal.stakeholders;
      document.getElementById('proposal-costs').textContent = proposal.costs;
      document.getElementById('proposal-metrics').textContent = proposal.metrics;
      document.getElementById('proposal-timeline').textContent = proposal.timeline;
      
      // Set author and institution if available
      document.getElementById('proposal-author').textContent = proposal.author || 'Not specified';
      document.getElementById('proposal-institution').textContent = proposal.institution || 'Not specified';
      
      // Create tags with animation
      const tagsContainer = document.getElementById('proposal-tags');
      if (proposal.tags && proposal.tags.length > 0) {
        proposal.tags.forEach((tag, index) => {
          const tagElement = document.createElement('span');
          tagElement.className = 'proposal-tag';
          tagElement.textContent = tag;
          tagElement.style.opacity = '0';
          tagElement.style.transform = 'translateY(10px)';
          tagsContainer.appendChild(tagElement);
          
          // Animate tags appearing with a staggered delay
          setTimeout(() => {
            tagElement.style.transition = 'all 0.5s ease';
            tagElement.style.opacity = '1';
            tagElement.style.transform = 'translateY(0)';
          }, 100 * index);
        });
      }
      
      // Initialize map if coordinates are available
      if (proposal.latitude && proposal.longitude) {
        const map = L.map('proposal-map').setView([proposal.latitude, proposal.longitude], 10);
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
          attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
        }).addTo(map);
        
        // Add marker for the proposal location
        const marker = L.marker([proposal.latitude, proposal.longitude]).addTo(map);
        marker.bindPopup(`<b>${proposal.city}, ${proposal.state}</b><br>${proposal.healthcareIssue || proposal.issue}`).openPopup();
      } else {
        // Hide map if no coordinates
        document.getElementById('proposal-map').style.display = 'none';
      }
      
      // Add scroll animations to sections
      const sections = document.querySelectorAll('.proposal-section');
      sections.forEach((section, index) => {
        section.style.opacity = '0';
        section.style.transform = 'translateY(20px)';
        section.style.transition = 'all 0.6s ease';
        
        // Create an observer for each section
        const observer = new IntersectionObserver((entries) => {
          entries.forEach(entry => {
            if (entry.isIntersecting) {
              setTimeout(() => {
                section.style.opacity = '1';
                section.style.transform = 'translateY(0)';
              }, 100 * index);
              observer.unobserve(entry.target);
            }
          });
        }, { threshold: 0.1 });
        
        observer.observe(section);
      });
    } else {
      // Redirect to error page if proposal not found
      window.location.replace('/error.html');
    }
    
    // Listen for proposal updates
    window.addEventListener('proposals-updated', function() {
      // Reload the proposal data
      const updatedProposal = window.ProposalsCMS.findProposalBySlug(slug);
      if (updatedProposal) {
        // Update the title with format "[Healthcare issue] in [City], [Country spelled out]"
        const title = `${updatedProposal.healthcareIssue || updatedProposal.issue} in ${updatedProposal.city}, United States`;
        document.title = title;
        
        // Update page with new data
        document.getElementById('proposal-title').textContent = title;
        document.getElementById('proposal-location').textContent = `${updatedProposal.city}, ${updatedProposal.state}`;
        document.getElementById('proposal-description').textContent = updatedProposal.description;
        document.getElementById('proposal-background').textContent = updatedProposal.background;
        document.getElementById('proposal-policy').textContent = updatedProposal.policy;
        document.getElementById('proposal-stakeholders').textContent = updatedProposal.stakeholders;
        document.getElementById('proposal-costs').textContent = updatedProposal.costs;
        document.getElementById('proposal-metrics').textContent = updatedProposal.metrics;
        document.getElementById('proposal-timeline').textContent = updatedProposal.timeline;
        
        // Update author and institution
        document.getElementById('proposal-author').textContent = updatedProposal.author || 'Not specified';
        document.getElementById('proposal-institution').textContent = updatedProposal.institution || 'Not specified';
        
        // Update tags
        const tagsContainer = document.getElementById('proposal-tags');
        tagsContainer.innerHTML = '';
        if (updatedProposal.tags && updatedProposal.tags.length > 0) {
          updatedProposal.tags.forEach((tag, index) => {
            const tagElement = document.createElement('span');
            tagElement.className = 'proposal-tag';
            tagElement.textContent = tag;
            tagsContainer.appendChild(tagElement);
          });
        }
      } else {
        // Redirect to error page if proposal was deleted
        window.location.replace('/error.html');
      }
    });
  });
</script>

<!-- Font Awesome for icons -->
<script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>
</body>
</html>