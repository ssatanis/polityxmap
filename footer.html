<footer class="footer">
  <div class="container-default w-container">
    <div class="footer-content" data-w-id="eeb31b51-83df-fb96-9e65-fcd1067756fb" style="opacity: 1; margin-bottom: 20px;">
      <div class="footer-menu-main-content">
        <div class="footer-menu-wrapper">
          <div class="title footer-menu">Quick Links</div>
          <div class="footer-menu-content">
            <ul class="footer-nav w-list-unstyled" role="list">
              <li class="footer-nav-item"><a class="footer-nav-link" href="/">Home</a></li>
              <li class="footer-nav-item"><a class="footer-nav-link" href="/#map">Map</a></li>
              <li class="footer-nav-item"><a class="footer-nav-link" href="/proposals">Proposals</a></li>
              <li class="footer-nav-item"><a class="footer-nav-link" href="/#features">Features</a></li>
              <li class="footer-nav-item"><a class="footer-nav-link" href="/contribute">Contribute</a></li>
              <li class="footer-nav-item"><a class="footer-nav-link" href="/about">About</a></li>
              <li class="footer-nav-item"><a class="footer-nav-link" href="mailto:support@polityxmap.org">Contact</a></li>
              <li class="footer-nav-item"><a class="footer-nav-link" href="/admin">Admin Portal</a></li>
              <li class="footer-nav-item"><a class="footer-nav-link" href="/privacy-policy">Privacy Policy</a></li>
              <li class="footer-nav-item"><a class="footer-nav-link" href="/terms-and-conditions">Terms and Conditions</a></li>
            </ul>
          </div>
        </div>
      </div>
      <div class="footer-newsletter-content">
        <div class="title footer-menu">Contact Us</div>
        <p class="paragraph footer-newsletter">Have questions or suggestions? We'd love to hear from you.</p>
        <div class="footer-contact-form-block w-form" style="max-width: 85%; margin: 0 auto;">
          <!-- Hidden form for Netlify to detect -->
          <form name="footer-contact" method="POST" netlify netlify-honeypot="bot-field" style="display:none">
            <input type="text" name="name" />
            <input type="email" name="email" />
            <textarea name="message"></textarea>
          </form>
          
          <!-- The visible form that users will interact with -->
          <form id="contact-visible-form" method="POST" data-netlify="true" name="footer-contact" action="/" onsubmit="handleSubmit(event)">
            <input type="hidden" name="form-name" value="footer-contact" />
            <div id="contact-form-content">
              <div class="form-input-wrapper" style="position: relative; margin-bottom: 12px;">
                <input class="input footer-form w-input" id="name-field" maxlength="256" name="name" placeholder="Your name" required="" type="text" style="background-color: rgba(138, 103, 255, 0.07); border: 1px solid rgba(138, 103, 255, 0.2); border-radius: 8px; color: white; padding: 8px 10px; font-size: 14px; transition: all 0.3s ease;"/>
              </div>
              
              <div class="form-input-wrapper" style="position: relative; margin-bottom: 12px;">
                <input class="input footer-form w-input" id="email-field" maxlength="256" name="email" placeholder="Your email address" required="" type="email" style="background-color: rgba(138, 103, 255, 0.07); border: 1px solid rgba(138, 103, 255, 0.2); border-radius: 8px; color: white; padding: 8px 10px; font-size: 14px; transition: all 0.3s ease;"/>
              </div>
              
              <div class="form-input-wrapper" style="position: relative; margin-bottom: 20px;">
                <textarea class="input footer-form textarea w-input" id="message-field" maxlength="5000" name="message" placeholder="Your message" required="" style="background-color: rgba(138, 103, 255, 0.07); border: 1px solid rgba(138, 103, 255, 0.2); border-radius: 8px; color: white; height: 45px; padding: 8px 10px; font-size: 14px; resize: none; transition: all 0.3s ease;"></textarea>
              </div>
              
              <div style="display: flex; justify-content: center;">
                <div class="button-gradient-animated" style="background: linear-gradient(-45deg, #8A67FF, #38B6FF, #8A67FF); background-size: 200% 200%; border-radius: 30px; transition: all 0.3s ease; position: relative; overflow: hidden; width: 100px;">
                  <button id="contact-submit-btn" type="submit" class="button-primary footer-contact w-button" style="background: transparent; border: none; color: white; padding: 6px 20px; font-size: 14px; position: relative; z-index: 2; width: 100%; cursor: pointer;">Send</button>
                </div>
              </div>
            </div>
          </form>
          
          <div id="form-success" style="display: none; text-align: center; margin-top: 20px; color: #8A67FF;">
            <div style="font-size: 18px; font-weight: 500; margin-bottom: 10px;">Message sent successfully!</div>
            <p>Thank you for reaching out. We'll get back to you soon.</p>
          </div>
        </div>
      </div>
    </div>
    <div class="footer-content-bottom" data-w-id="7ddc8154-5985-c814-10de-e9f5faad4e13" style="opacity: 1; margin-top: 0px;">
      <a class="footer-logo-container w-inline-block" href="/">
        <img alt="PolityxMap - Logo" class="footer-logo" src="img/PolityxMap.svg"/>
      </a>
      <div class="footer-small-print">Â© 2025 PolityxMap. All Rights Reserved.</div>
    </div>
  </div>
</footer>

<style>
@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}

@keyframes pulse {
  0% { transform: scale(1); }
  50% { transform: scale(1.05); }
  100% { transform: scale(1); }
}

.submitted-text {
  animation: fadeIn 0.5s ease-in-out;
}

.success-pulse {
  animation: pulse 0.5s ease-in-out 2;
}
</style>

<script>
document.addEventListener('DOMContentLoaded', function() {
  // Get references to form elements
  const contactForm = document.getElementById('contact-visible-form');
  const submitButton = document.getElementById('contact-submit-btn');
  const nameField = document.getElementById('name-field');
  const emailField = document.getElementById('email-field');
  const messageField = document.getElementById('message-field');
  const formContent = document.getElementById('contact-form-content');
  const successMessage = document.getElementById('form-success');
  
  if (!contactForm || !submitButton || !nameField || !emailField || !messageField) {
    console.error('Form elements not found');
    return;
  }

  // Define form submission handler
  window.handleSubmit = function(event) {
    // Prevent default form submission
    event.preventDefault();
    
    // Validate form
    if (!nameField.value || !emailField.value || !messageField.value) {
      alert('Please fill out all fields');
      return false;
    }
    
    // Change button text to show submission is in progress
    submitButton.textContent = 'Sending...';
    submitButton.disabled = true;
    
    // Get form data
    const formData = new FormData(contactForm);
    
    // Use fetch API to submit the form to Netlify
    fetch('/', {
      method: 'POST',
      headers: { 'Content-Type': 'application/x-www-form-urlencoded' },
      body: new URLSearchParams(formData).toString()
    })
    .then(response => {
      if (response.ok) {
        // Success! Show animation and success message
        submitButton.textContent = 'Sent!';
        submitButton.classList.add('submitted-text');
        submitButton.classList.add('success-pulse');
        
        // Clear form fields
        nameField.value = '';
        emailField.value = '';
        messageField.value = '';
        
        // Show success message after animation
        setTimeout(() => {
          contactForm.style.display = 'none';
          successMessage.style.display = 'block';
          successMessage.classList.add('submitted-text');
        }, 1500);

        // Wait and reset form for future use
        setTimeout(() => {
          // Reset form visibility after 5 seconds
          contactForm.style.display = 'block';
          successMessage.style.display = 'none';
          submitButton.textContent = 'Send';
          submitButton.disabled = false;
          submitButton.classList.remove('submitted-text');
          submitButton.classList.remove('success-pulse');
        }, 6000);
      } else {
        throw new Error('Form submission failed');
      }
    })
    .catch(error => {
      console.error('Error:', error);
      submitButton.textContent = 'Send';
      submitButton.disabled = false;
      alert('There was a problem submitting your form. Please try again.');
    });
    
    return false;
  };
});
</script> 